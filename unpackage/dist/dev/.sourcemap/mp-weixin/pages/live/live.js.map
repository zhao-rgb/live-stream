{"version":3,"sources":["uni-app:///main.js","webpack:///E:/uni-app/live-stream/pages/live/live.nvue?4bea","webpack:///E:/uni-app/live-stream/pages/live/live.nvue?c786","webpack:///E:/uni-app/live-stream/pages/live/live.nvue?a4b8","webpack:///E:/uni-app/live-stream/pages/live/live.nvue?4b0e","uni-app:///pages/live/live.nvue","webpack:///E:/uni-app/live-stream/pages/live/live.nvue?0417","webpack:///E:/uni-app/live-stream/pages/live/live.nvue?2422","webpack:///E:/uni-app/live-stream/pages/live/live.nvue?4b41","webpack:///E:/uni-app/live-stream/pages/live/live.nvue?5336"],"names":["createPage","Page"],"mappings":"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","file":"pages/live/live.js","sourcesContent":["import 'uni-pages';\nimport Vue from 'vue'\nimport Page from './pages/live/live.nvue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./live.nvue?vue&type=template&id=1127cb58&\"\nvar renderjs\nimport script from \"./live.nvue?vue&type=script&lang=js&\"\nexport * from \"./live.nvue?vue&type=script&lang=js&\"\nimport style0 from \"./live.nvue?vue&type=style&index=0&lang=css&\"\nimport style1 from \"./live.nvue?vue&type=style&index=1&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!D:\\\\ProgramFiles\\\\HBuilderX.2.9.3.20201014.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/live/live.nvue\"\nexport default component.exports","export * from \"-!D:\\\\ProgramFiles\\\\HBuilderX.2.9.3.20201014.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\templateLoader.js??vue-loader-options!D:\\\\ProgramFiles\\\\HBuilderX.2.9.3.20201014.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--16-0!D:\\\\ProgramFiles\\\\HBuilderX.2.9.3.20201014.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\template.js!D:\\\\ProgramFiles\\\\HBuilderX.2.9.3.20201014.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-uni-app-loader\\\\page-meta.js!D:\\\\ProgramFiles\\\\HBuilderX.2.9.3.20201014.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\ProgramFiles\\\\HBuilderX.2.9.3.20201014.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./live.nvue?vue&type=template&id=1127cb58&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  if (!_vm._isMounted) {\n    _vm.e0 = function($event, item) {\n      var _temp = arguments[arguments.length - 1].currentTarget.dataset,\n        _temp2 = _temp.eventParams || _temp[\"event-params\"],\n        item = _temp2.item\n\n      var _temp, _temp2\n\n      _vm.giftActiveId = item.id\n    }\n  }\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!D:\\\\ProgramFiles\\\\HBuilderX.2.9.3.20201014.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\ProgramFiles\\\\HBuilderX.2.9.3.20201014.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!D:\\\\ProgramFiles\\\\HBuilderX.2.9.3.20201014.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\ProgramFiles\\\\HBuilderX.2.9.3.20201014.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\ProgramFiles\\\\HBuilderX.2.9.3.20201014.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./live.nvue?vue&type=script&lang=js&\"; export default mod; export * from \"-!D:\\\\ProgramFiles\\\\HBuilderX.2.9.3.20201014.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\ProgramFiles\\\\HBuilderX.2.9.3.20201014.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!D:\\\\ProgramFiles\\\\HBuilderX.2.9.3.20201014.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\ProgramFiles\\\\HBuilderX.2.9.3.20201014.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\ProgramFiles\\\\HBuilderX.2.9.3.20201014.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./live.nvue?vue&type=script&lang=js&\"","<style>\n  view,\n  swiper-item,\n  scroll-view {\n    display:flex;\n    flex-direction:column;\n    flex-shrink: 0;\n    flex-grow: 0;\n    flex-basis: auto;\n    align-items: stretch;\n    align-content: flex-start;\n  }\n  view,\n  image,\n  input,\n  scroll-view,\n  swiper,\n  swiper-item,\n  text,\n  textarea,\n  video {\n    position: relative;\n    border: 0px solid #000000;\n    box-sizing: border-box;\n  }\n  swiper-item {\n    position: absolute;\n  }\n</style>\n<template>\r\n\t<!-- <view style=\"height: 400rpx;\" :style=\"'margin-top:'+statusBarHeight+'px'\">\r\n\t\t<text>jw2jjw2</text>\r\n\t\t<video src=\"http://ivi.bupt.edu.cn/hls/cctv1hd.m3u8\" autoplay controls=\"false\" class=\"flex-1\"></video>\r\n\t</view>\r\n\t<view class=\"bg-light\" style=\"height: 1000rpx; z-index:20;\">\r\n\t\t<button @tap=\"goback\" class=\"bg-main mt-3\">返回</button>\r\n\t</view> -->\r\n\r\n\t<view class=\"flex-1\">\r\n\t\t<video :src=\"src\" autoplay controls=\"false\" class=\"flex-1\"></video>\r\n\r\n\t\t<!-- 头部 -->\r\n\t\t<view style=\"position: fixed; left: 0; right: 0;\" :style=\"'top:' + statusBarHeight + 'px'\">\r\n\t\t\t<!-- 个人信息|观看详细信息 -->\r\n\t\t\t<view style=\"height: 80rpx;\" class=\"px-2 flex justify-center align-center\">\r\n\t\t\t\t<view style=\"width: 325rpx;background-color: rgba(0,0,0,0.4);\" class=\"flex rounded-circle\">\r\n\t\t\t\t\t<view class=\"p\">\r\n\t\t\t\t\t\t<image\r\n\t\t\t\t\t\t\t:src=\"detail.user.avatar || '/static/me.jpg'\"\r\n\t\t\t\t\t\t\tstyle=\"width: 70rpx; height: 70rpx;\"\r\n\t\t\t\t\t\t\tclass=\"rounded-circle\"\r\n\t\t\t\t\t\t></image>\r\n\t\t\t\t\t</view>\r\n\r\n\t\t\t\t\t<view class=\"flex-1 flex flex-column justify-center\">\r\n\t\t\t\t\t\t<text class=\"text-white font\">{{ detail.user.username }}</text>\r\n\t\t\t\t\t\t<text class=\"text-white font-sm\">{{ detail.user.look_count }}</text>\r\n\t\t\t\t\t</view>\r\n\r\n\t\t\t\t\t<view class=\"p\">\r\n\t\t\t\t\t\t<view\r\n\t\t\t\t\t\t\tclass=\"rounded-circle flex align-center justify-center bg-main\"\r\n\t\t\t\t\t\t\tstyle=\"width: 70rpx;height: 70rpx;\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<text class=\"text-white\">+</text>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\r\n\t\t\t\t<view style=\"width: 325rpx;background-color: rgba(0,0,0,0.4);\" class=\"flex rounded-circle\">\r\n\t\t\t\t\t<!-- 实时在线观看用户情况 -->\r\n\t\t\t\t\t<scroll-view scroll-x=\"true\" class=\"flex-1 flex\">\r\n\t\t\t\t\t\t<view class=\"p\" v-for=\"(item, index) in list\" :key=\"index\">\r\n\t\t\t\t\t\t\t<image\r\n\t\t\t\t\t\t\t\t:src=\"item.avatar || '/static/1.png'\"\r\n\t\t\t\t\t\t\t\tstyle=\"width: 70rpx; height: 70rpx;\"\r\n\t\t\t\t\t\t\t\tclass=\"rounded-circle\"\r\n\t\t\t\t\t\t\t></image>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</scroll-view>\r\n\t\t\t\t\t<view class=\"p\">\r\n\t\t\t\t\t\t<view\r\n\t\t\t\t\t\t\tclass=\"rounded-circle flex align-center justify-center bg-main\"\r\n\t\t\t\t\t\t\tstyle=\"width: 70rpx; height: 70rpx;\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<text class=\"text-white font-sm\">{{ list.length }}</text>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\r\n\t\t\t<!-- 金币 -->\r\n\t\t\t<view style=\"height: 80rpx;\" class=\"px-2 my-2\">\r\n\t\t\t\t<view style=\"width: 325rpx;background-color: rgba(0,0,0,0.4);\" class=\"flex rounded-circle align-center\">\r\n\t\t\t\t\t<view class=\"p\"><text class=\"text-warning\">金币区</text></view>\r\n\t\t\t\t\t<view class=\"flex-1 flex flex-column justify-center\">\r\n\t\t\t\t\t\t<text class=\"text-white font\">{{ detail.coin }}</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\r\n\t\t\t<!-- 礼物区 -->\r\n\t\t\t<!-- <view style=\"height: 300rpx;\" class=\"bg-main\"><text>礼物区</text></view> -->\r\n\t\t\t<f-gift ref=\"gift\"></f-gift>\r\n\t\t</view>\r\n\r\n\t\t<!-- 弹幕 -->\r\n\t\t<!-- <view\r\n\t\t\tstyle=\"position: fixed; bottom: 120rpx; left: 0; right: 0; width: 750rpx; height: 300rpx;\"\r\n\t\t\tclass=\"bg-main\"\r\n\t\t>\r\n\t\t\t<text>弹幕区</text>\r\n\t\t</view> -->\r\n\t\t<f-danmu ref=\"danmu\"></f-danmu>\r\n\r\n\t\t<!-- 输入框弹出层 -->\r\n\t\t<uni-popup type=\"bottom\" ref=\"input\">\r\n\t\t\t<view class=\"bg-white flex align-center px-3\" style=\"height: 120rpx;\">\r\n\t\t\t\t<input\r\n\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\tv-model=\"content\"\r\n\t\t\t\t\tclass=\"border rounded flex-1 px-3 font-md\"\r\n\t\t\t\t\tplaceholder=\"说点什么吧...\"\r\n\t\t\t\t\tstyle=\"height: 80rpx;\"\r\n\t\t\t\t/>\r\n\t\t\t\t<view\r\n\t\t\t\t\tclass=\"flex align-center justify-center py-2 px-2 ml-3 rounded\"\r\n\t\t\t\t\t@click=\"sumbit\"\r\n\t\t\t\t\t:class=\"content === '' ? 'bg-main-disabled' : 'bg-main'\"\r\n\t\t\t\t>\r\n\t\t\t\t\t<text class=\"font text-white\">发送</text>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</uni-popup>\r\n\r\n\t\t<!-- 底部 -->\r\n\t\t<view style=\"height: 120rpx;\" class=\"flex align-center justify-between fixed-bottom\">\r\n\t\t\t<view class=\"px-2\" @click=\"openInput\">\r\n\t\t\t\t<view class=\"btn px-3\"><text class=\"text-white font\">说点什么...</text></view>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"flex align-center\">\r\n\t\t\t\t<view class=\"btn btn-icon\">\r\n\t\t\t\t\t<text class=\"iconfont text-white\" style=\"font-size: 40px;\">&#xe633;</text>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"btn btn-icon bg-main\" @click=\"openGift\"><text class=\"iconfont\">&#xe67c;</text></view>\r\n\t\t\t\t<view class=\"btn btn-icon\"><text class=\"iconfont text-white\">&#xe7cd;</text></view>\r\n\t\t\t\t<view class=\"btn btn-icon\" @click=\"back\"><text class=\"iconfont text-white\">&#xe607;</text></view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\r\n\t\t<!-- 送礼物弹出层 -->\r\n\t\t<uni-popup type=\"bottom\" ref=\"giftPopup\">\r\n\t\t\t<view class=\"bg-white\" style=\"width: 750rpx; height: 550rpx;\">\r\n\t\t\t\t<view style=\"height: 100rpx;\" class=\"flex justify-between align-center\">\r\n\t\t\t\t\t<text class=\"text-main font-md ml-3\">礼物</text>\r\n\t\t\t\t\t<view\r\n\t\t\t\t\t\tclass=\"flex align-center justify-center\"\r\n\t\t\t\t\t\tstyle=\"width: 100rpx; height: 100rpx;\"\r\n\t\t\t\t\t\t@click=\"closeGift\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<text class=\"iconfont\">&#xe607;</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t<swiper :indicator-dots=\"true\" :duration=\"500\" style=\"height: 350rpx;\" class=\"border-bottom border-top\">\r\n\t\t\t\t\t<swiper-item>\r\n\t\t\t\t\t\t<view class=\"flex flex-wrap\">\r\n\t\t\t\t\t\t\t<view\r\n\t\t\t\t\t\t\t\tstyle=\"width: 187rpx;height:175rpx;\"\r\n\t\t\t\t\t\t\t\tclass=\"flex flex-column justify-center align-center\"\r\n\t\t\t\t\t\t\t\tv-for=\"(item, index) in gifts\"\r\n\t\t\t\t\t\t\t\t:key=\"index\"\r\n\t\t\t\t\t\t\t\t:class=\"giftActiveId === item.id ? 'border border-main' : ''\"\r\n\t\t\t\t\t\t\t\t@click=\"giftActiveId = item.id\"\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<image :src=\"item.image\" style=\"width:100rpx;height: 100rpx;\" class=\"rounded\"></image>\r\n\t\t\t\t\t\t\t\t<view class=\"flex mt-1\">\r\n\t\t\t\t\t\t\t\t\t<text class=\"text-warning font mr-1\">{{ item.name }}</text>\r\n\t\t\t\t\t\t\t\t\t<text class=\"text-secondary font\">{{ item.coin }}</text>\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</swiper-item>\r\n\t\t\t\t</swiper>\r\n\t\t\t\t<view style=\"height:100rpx;\" class=\"flex align-center justify-end\">\r\n\t\t\t\t\t<view class=\"flex align-center justify-center py-2 px-2 mr-3 rounded bg-warning\" @click=\"openCoin\">\r\n\t\t\t\t\t\t<text class=\"font\">充值</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"flex align-center justify-center py-2 px-2 mr-3 rounded bg-main\" @click=\"sendGift\">\r\n\t\t\t\t\t\t<text class=\"font text-white\">发送</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</uni-popup>\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\nimport fGift from '@/components/live/f-gift.vue';\r\nimport fDanmu from '@/components/live/f-danmu.vue';\r\nimport uniPopup from '@/components/uni-ui/uni-popup/uni-popup.vue';\r\nimport myGifts from '@/common/gifts.js';\r\nimport $H from '@/common/request.js';\r\nimport $C from '@/common/config.js';\r\nimport { mapState } from 'vuex';\r\nexport default {\r\n\tcomponents: {\r\n\t\tfGift,\r\n\t\tfDanmu,\r\n\t\tuniPopup\r\n\t},\r\n\tmounted() {\r\n\t\t// // 送礼物演示\r\n\t\t// setInterval(() => {\r\n\t\t// \tthis.$refs.gift.send({\r\n\t\t// \t\tusername: '发送人',\r\n\t\t// \t\tavatar: '',\r\n\t\t// \t\tgift_name: '蛋糕',\r\n\t\t// \t\tgift_image: '/static/gift/3.png',\r\n\t\t// \t\tnum: 1\r\n\t\t// \t});\r\n\t\t// }, 3000);\r\n\t\t//加入直播间\r\n\t\tthis.joinOrLeaveLive('join');\r\n\t},\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tid: 0,\r\n\t\t\tdetail: {\r\n\t\t\t\tcreate_time: '',\r\n\t\t\t\tid: 1,\r\n\t\t\t\ttitle: '',\r\n\t\t\t\tcover: '',\r\n\t\t\t\tuser_id: 0,\r\n\t\t\t\tlook_count: 0,\r\n\t\t\t\tcoin: 0,\r\n\t\t\t\tkey: '',\r\n\t\t\t\tstatus: 0,\r\n\t\t\t\tuserId: 0,\r\n\t\t\t\tuser: {\r\n\t\t\t\t\tid: 0,\r\n\t\t\t\t\tusername: '',\r\n\t\t\t\t\tavatar: ''\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tsign: '',\r\n\t\t\tstatusBarHeight: 0,\r\n\t\t\tcontent: '',\r\n\t\t\tgifts: [],\r\n\t\t\tgiftActiveId: 0,\r\n\t\t\t//在线用户列表\r\n\t\t\tlist: []\r\n\t\t};\r\n\t},\r\n\tonLoad(option) {\r\n\t\tthis.id = option.id;\r\n\t\tconsole.log(this.id);\r\n\t\tlet res = uni.getSystemInfoSync();\r\n\t\tthis.statusBarHeight = res.statusBarHeight;\r\n\t\tthis.gifts = myGifts;\r\n\t\t//请求后端接口，获得该直播间详情数据，包括主播信息，和直播间的签名数据\r\n\t\t$H.get('/live/read/' + this.id).then(res => {\r\n\t\t\tconsole.log(res);\r\n\t\t\tthis.detail = res.data;\r\n\t\t\tthis.sign = res.sign;\r\n\t\t});\r\n\t\t//请求礼物列表接口\r\n\t\t$H.get('/gift/list').then(res => {\r\n\t\t\tthis.gifts = res.map(item => {\r\n\t\t\t\titem.image = $C.imageUrl + item.image;\r\n\t\t\t\treturn item;\r\n\t\t\t});\r\n\t\t});\r\n\t\t//监听全局事件\r\n\t\tuni.$on('live', this.handleLiveEvent);\r\n\t},\r\n\tdestroyed() {\r\n\t\t// 离开直播间\r\n\t\tthis.joinOrLeaveLive('leave');\r\n\t\t//移除全局事件\r\n\t\tuni.$off('live', this.handleLiveEvent);\r\n\t},\r\n\tcomputed: {\r\n\t\t...mapState({\r\n\t\t\tsocket: state => state.socket,\r\n\t\t\ttoken: state => state.token\r\n\t\t}),\r\n\t\tsrc() {\r\n\t\t\tif (this.detail.key == '' || this.sign == '') {\r\n\t\t\t\treturn '';\r\n\t\t\t}\r\n\t\t\treturn `${$C.livePlayBaseUrl}/live/${this.detail.key}.flv?sign=${this.sign}`;\r\n\t\t},\t\r\n\t},\r\n\tmethods: {\r\n\t\t//处理直播间事件\r\n\t\thandleLiveEvent(e) {\r\n\t\t\tconsole.log(e);\r\n\t\t\tlet d = e.data;\r\n\t\t\tswitch (e.type) {\r\n\t\t\t\tcase 'online':\r\n\t\t\t\t\tif (d.action === 'join') {\r\n\t\t\t\t\t\tthis.list = d.data;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (d.action === 'leave') {\r\n\t\t\t\t\t\tthis.list = d.data;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'comment':\r\n\t\t\t\t\tthis.$refs.danmu.send({\r\n\t\t\t\t\t\tid: d.id,\r\n\t\t\t\t\t\tname: d.user.name,\r\n\t\t\t\t\t\tcontent: d.content\r\n\t\t\t\t\t});\r\n\t\t\t\t\tthis.content = '';\r\n\t\t\t\t\tthis.$refs.input.close();\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'gift':\r\n\t\t\t\t\tthis.$refs.gift.send({\r\n\t\t\t\t\t\tusername: d.username,\r\n\t\t\t\t\t\tavatar: d.avatar,\r\n\t\t\t\t\t\tgift_name: d.gift_name,\r\n\t\t\t\t\t\tgift_image: d.gift_image,\r\n\t\t\t\t\t\tnum: d.num\r\n\t\t\t\t\t});\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t},\r\n\t\t//加入或离开直播间\r\n\t\tjoinOrLeaveLive(type) {\r\n\t\t\tif (this.socket && this.token) {\r\n\t\t\t\tthis.socket.emit(type + 'Live', {\r\n\t\t\t\t\tlive_id: this.id,\r\n\t\t\t\t\ttoken: this.token\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t},\r\n\t\topenGift() {\r\n\t\t\tthis.$refs.giftPopup.open();\r\n\t\t},\r\n\t\tcloseGift() {\r\n\t\t\tthis.$refs.giftPopup.close();\r\n\t\t},\r\n\t\tsendGift() {\r\n\t\t\tif (this.giftActiveId === 0) {\r\n\t\t\t\treturn uni.showToast({\r\n\t\t\t\t\ttitle: '请选择要发送的礼物',\r\n\t\t\t\t\ticon: 'none'\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\tlet index = this.gifts.findIndex(item => item.id === this.giftActiveId);\r\n\t\t\tif (index === -1) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\t// this.$refs.gift.send({\r\n\t\t\t// \tusername: this.$store.state.user.username,\r\n\t\t\t// \tavatar: this.$store.state.user.avatar,\r\n\t\t\t// \tgift_name: g.name,\r\n\t\t\t// \tgift_image: g.image,\r\n\t\t\t// \tnum: 10\r\n\t\t\t// });\r\n\t\t\t// this.closeGift();\r\n\t\t\tlet g = this.gifts[index];\r\n\r\n\t\t\tif (!this.token && !this.socket) {\r\n\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\turl: '../login/login'\r\n\t\t\t\t});\r\n\t\t\t\treturn uni.showToast({\r\n\t\t\t\t\ttitle: '请先登录',\r\n\t\t\t\t\ticon: 'none'\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\tconsole.log(g);\r\n\r\n\t\t\tif (this.socket) {\r\n\t\t\t\tconsole.log('请求到socket');\r\n\t\t\t\tthis.socket.emit('gift', {\r\n\t\t\t\t\tlive_id: this.id,\r\n\t\t\t\t\tgift_id: g.id,\r\n\t\t\t\t\ttoken: this.token\r\n\t\t\t\t});\r\n\t\t\t\tconsole.log('结束');\r\n\t\t\t}\r\n\t\t\tthis.closeGift();\r\n\t\t},\r\n\t\t//打开输入弹幕的对话框\r\n\t\topenInput() {\r\n\t\t\tthis.$store.dispatch('authMethod', () => {\r\n\t\t\t\tthis.$refs.input.open();\r\n\t\t\t});\r\n\t\t},\r\n\t\t//提交发送弹幕信息\r\n\t\tsumbit() {\r\n\t\t\tif (this.content === '') {\r\n\t\t\t\treturn uni.showToast({\r\n\t\t\t\t\ttitle: '评论内容不能为空',\r\n\t\t\t\t\ticon: 'none'\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\tif (!this.token && !this.socket) {\r\n\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\turl: '../login/login'\r\n\t\t\t\t});\r\n\t\t\t\treturn uni.showToast({\r\n\t\t\t\t\ttitle: '请先登录',\r\n\t\t\t\t\ticon: 'none'\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\tif (this.socket) {\r\n\t\t\t\tthis.socket.emit('comment', {\r\n\t\t\t\t\tlive_id: this.id,\r\n\t\t\t\t\tdata: this.content,\r\n\t\t\t\t\ttoken: this.token\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t},\r\n\t\t//返回上一层页面\r\n\t\tback() {\r\n\t\t\tuni.navigateBack({\r\n\t\t\t\tdelta: 1\r\n\t\t\t});\r\n\t\t},\r\n\t\t//跳转充值页面\r\n\t\topenCoin() {\r\n\t\t\tuni.navigateTo({\r\n\t\t\t\turl: '../coin/coin'\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n};\r\n</script>\r\n\r\n<style>\r\n.btn {\r\n\theight: 80rpx;\r\n\tborder-radius: 100rpx;\r\n\tbackground-color: rgba(255, 255, 255, 0.12);\r\n\talign-items: center;\r\n\tjustify-content: center;\r\n}\r\n.btn-icon {\r\n\twidth: 80rpx;\r\n\tmargin-right: 20rpx;\r\n}\r\n</style>\n","import mod from \"-!D:\\\\ProgramFiles\\\\HBuilderX.2.9.3.20201014.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--6-oneOf-1-0!D:\\\\ProgramFiles\\\\HBuilderX.2.9.3.20201014.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--6-oneOf-1-1!D:\\\\ProgramFiles\\\\HBuilderX.2.9.3.20201014.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!D:\\\\ProgramFiles\\\\HBuilderX.2.9.3.20201014.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--6-oneOf-1-2!D:\\\\ProgramFiles\\\\HBuilderX.2.9.3.20201014.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--6-oneOf-1-3!D:\\\\ProgramFiles\\\\HBuilderX.2.9.3.20201014.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\ProgramFiles\\\\HBuilderX.2.9.3.20201014.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./live.nvue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!D:\\\\ProgramFiles\\\\HBuilderX.2.9.3.20201014.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--6-oneOf-1-0!D:\\\\ProgramFiles\\\\HBuilderX.2.9.3.20201014.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--6-oneOf-1-1!D:\\\\ProgramFiles\\\\HBuilderX.2.9.3.20201014.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!D:\\\\ProgramFiles\\\\HBuilderX.2.9.3.20201014.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--6-oneOf-1-2!D:\\\\ProgramFiles\\\\HBuilderX.2.9.3.20201014.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--6-oneOf-1-3!D:\\\\ProgramFiles\\\\HBuilderX.2.9.3.20201014.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\ProgramFiles\\\\HBuilderX.2.9.3.20201014.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./live.nvue?vue&type=style&index=0&lang=css&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1616830051288\n      var cssReload = require(\"D:/ProgramFiles/HBuilderX.2.9.3.20201014.full/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  ","import mod from \"-!D:\\\\ProgramFiles\\\\HBuilderX.2.9.3.20201014.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--6-oneOf-1-0!D:\\\\ProgramFiles\\\\HBuilderX.2.9.3.20201014.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--6-oneOf-1-1!D:\\\\ProgramFiles\\\\HBuilderX.2.9.3.20201014.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!D:\\\\ProgramFiles\\\\HBuilderX.2.9.3.20201014.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--6-oneOf-1-2!D:\\\\ProgramFiles\\\\HBuilderX.2.9.3.20201014.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--6-oneOf-1-3!D:\\\\ProgramFiles\\\\HBuilderX.2.9.3.20201014.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\ProgramFiles\\\\HBuilderX.2.9.3.20201014.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./live.nvue?vue&type=style&index=1&lang=css&\"; export default mod; export * from \"-!D:\\\\ProgramFiles\\\\HBuilderX.2.9.3.20201014.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--6-oneOf-1-0!D:\\\\ProgramFiles\\\\HBuilderX.2.9.3.20201014.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--6-oneOf-1-1!D:\\\\ProgramFiles\\\\HBuilderX.2.9.3.20201014.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!D:\\\\ProgramFiles\\\\HBuilderX.2.9.3.20201014.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--6-oneOf-1-2!D:\\\\ProgramFiles\\\\HBuilderX.2.9.3.20201014.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--6-oneOf-1-3!D:\\\\ProgramFiles\\\\HBuilderX.2.9.3.20201014.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\ProgramFiles\\\\HBuilderX.2.9.3.20201014.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./live.nvue?vue&type=style&index=1&lang=css&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1616830051292\n      var cssReload = require(\"D:/ProgramFiles/HBuilderX.2.9.3.20201014.full/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}